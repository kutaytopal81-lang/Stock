<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Stok Takip</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body { font-family: Arial; padding: 15px; }
h2 { margin-top: 25px; }
input, select, button { padding: 8px; margin: 5px 0; width: 100%; }
.box { border: 1px solid #ccc; padding: 10px; margin-bottom: 15px; }
</style>
</head>
<body>

<h1>ğŸ“¦ Stok Takip</h1>

<div class="box">
<h2>ğŸ“Š Stok</h2>
<ul id="stok"></ul>
</div>

<div class="box">
<h2>â• SatÄ±ÅŸ Ekle</h2>
<input id="isim" placeholder="Ä°sim">
<select id="urun">
<option value="mango">Mango</option>
<option value="kent">Kent</option>
<option value="milano">Milano</option>
<option value="karpuz">Karpuz</option>
<option value="elma">Elma</option>
</select>
<input id="adet" type="number" placeholder="Adet">
<button onclick="satisEkle()">SatÄ±ÅŸ Ekle</button>
</div>

<div class="box">
<h2>ğŸ“œ GeÃ§miÅŸ SatÄ±ÅŸlar</h2>
<ul id="gecmis"></ul>
</div>

<script>
// ğŸ”¥ FIREBASE CONFIG (BURAYI DOLDUR)
const firebaseConfig = {
  apiKey: "AIzaSyB_QzlNVxwqUOu8UzEZvWKef-18KopauGc",
  authDomain: "stok-59023.firebaseapp.com",
  projectId: "stok-59023"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const stokRef = db.collection("state").doc("stok");
const satisRef = db.collection("satislar");

// Ä°lk stok (yoksa oluÅŸturur)
stokRef.get().then(d=>{
if(!d.exists){
stokRef.set({
mango:23, kent:6, milano:5, karpuz:5, elma:6
});
}
});

stokRef.onSnapshot(doc=>{
const s = doc.data();
stok.innerHTML = `
<li>Mango: ${s.mango}</li>
<li>Kent: ${s.kent}</li>
<li>Milano: ${s.milano}</li>
<li>Karpuz: ${s.karpuz}</li>
<li>Elma: ${s.elma}</li>
`;
});

satisRef.orderBy("time","desc").onSnapshot(snap=>{
gecmis.innerHTML="";
snap.forEach(d=>{
const x=d.data();
gecmis.innerHTML+=`<li>${x.isim} - ${x.adet} ${x.urun}</li>`;
});
});

function satisEkle(){
const isim=isim.value;
const urun=urun.value;
const adet=parseInt(adet.value);

stokRef.update({
[urun]: firebase.firestore.FieldValue.increment(-adet)
});

satisRef.add({
isim, urun, adet, time: firebase.firestore.FieldValue.serverTimestamp()
});
}
</script>

</body>
</html>
<script>
// ğŸ” SADECE 1 KERE Ã‡ALIÅACAK OTOMATÄ°K GEÃ‡MÄ°Å SATIÅ EKLEME
const eskiSatislar = [
  { isim:"Batuhan", urun:"mango", adet:1 },
  { isim:"Batuhan", urun:"milano", adet:1 },
  { isim:"AyÅŸegÃ¼l", urun:"mango", adet:1 },
  { isim:"Azra", urun:"mango", adet:3 },
  { isim:"Azra", urun:"elma", adet:1 },
  { isim:"Enes", urun:"mango", adet:1 },
  { isim:"OÄŸuz", urun:"mango", adet:1 },
  { isim:"OÄŸuz", urun:"karpuz", adet:1 },
  { isim:"OÄŸuz", urun:"elma", adet:1 },
  { isim:"Alperen", urun:"mango", adet:2 },
  { isim:"GTU Ahmet", urun:"kent", adet:1 },
  { isim:"GTU Yusuf", urun:"milano", adet:1 },
  { isim:"GTU Yusuf", urun:"mango", adet:1 },
  { isim:"Nur", urun:"mango", adet:1 },
  { isim:"Nur", urun:"milano", adet:1 },
  { isim:"Nur", urun:"kent", adet:1 },
  { isim:"Mert", urun:"mango", adet:7 },
  { isim:"Birce", urun:"mango", adet:1 },
  { isim:"Ä°hsan Efe", urun:"milano", adet:1 },
  { isim:"YaÄŸÄ±z & Ceyda", urun:"mango", adet:1 },
  { isim:"Erdem", urun:"mango", adet:1 },
  { isim:"Berke", urun:"mango", adet:1 },
  { isim:"Enes", urun:"karpuz", adet:1 },
  { isim:"Enes", urun:"milano", adet:1 },
  { isim:"Burak", urun:"karpuz", adet:1 },
  { isim:"Burak", urun:"mango", adet:1 },
  { isim:"DaÄŸhan", urun:"karpuz", adet:1 },
  { isim:"DaÄŸhan", urun:"kent", adet:1 },
  { isim:"Muhsin", urun:"mango", adet:1 },
  { isim:"Muhsin", urun:"karpuz", adet:1 },
  { isim:"Bolu", urun:"mango", adet:4 },
  { isim:"Bolu", urun:"elma", adet:2 },
  { isim:"Egemen Ark.", urun:"milano", adet:1 },
  { isim:"Egemen Ark.", urun:"mango", adet:1 }
];

eskiSatislar.forEach(x=>{
  db.collection("satislar").add({
    ...x,
    time: firebase.firestore.FieldValue.serverTimestamp()
  });
});

console.log("âœ… GeÃ§miÅŸ satÄ±ÅŸlar eklendi");
</script>
